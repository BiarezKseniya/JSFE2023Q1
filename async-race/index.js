(()=>{var e={767:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(645),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,"body {\r\n    background-color: black;\r\n    font-family: Arial, Helvetica, sans-serif;\r\n    font-size: 1rem;\r\n    color: white;\r\n}\r\n\r\nbutton {\r\n    appearance: none;\r\n    border: none;\r\n    height: 1.5rem;\r\n    border-radius: 5px;\r\n    text-transform: uppercase;\r\n    font-size: 0.85rem;\r\n    font-weight: 700;\r\n    outline: none;\r\n    padding-top: 5px;\r\n    box-sizing: content-box;\r\n    cursor: pointer;\r\n    transition: 0.3s;\r\n    min-width: 90px;\r\n    transition: 0.3s;\r\n}\r\n\r\ninput {\r\n    appearance: none;\r\n    border: none;\r\n    font-family: Arial, Helvetica, sans-serif;\r\n    font-size: 1rem;\r\n    outline: none;\r\n    border-radius: 5px;\r\n    height: 1.5rem;\r\n    padding: 5px;\r\n    box-sizing: content-box;\r\n}\r\n\r\ninput[type=\"color\"]::-webkit-color-swatch {\r\n    border: none;\r\n    border-radius: 2px;\r\n    padding: 0;\r\n}\r\n\r\ninput[type=\"text\"]::placeholder {\r\n    font-style: italic;\r\n}\r\n\r\n.header__nav {\r\n    display: flex;\r\n    gap: 5px;\r\n    padding: 30px;\r\n}\r\n\r\n.header__switch-page,\r\n.garage__paginator-button,\r\n.winners__paginator-button {\r\n    background-color: rgb(171, 236, 96);\r\n    box-shadow: 0px 5px 0px 0px green;\r\n}\r\n\r\n.main {\r\n    padding: 0 30px;\r\n}\r\n\r\n.controls,\r\n.controls__car {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 10px;\r\n}\r\n\r\n.controls {\r\n    width: fit-content;\r\n}\r\n\r\n.controls__car-create,\r\n.controls__car-update {\r\n    display: flex;\r\n    gap: 5px;\r\n    align-items: center;\r\n}\r\n\r\n.controls__car-button,\r\n.car-params__button {\r\n    background-color: lightblue;\r\n    box-shadow: 0px 5px 0px 0px rgb(78, 184, 220);\r\n    align-self: flex-start;\r\n}\r\n\r\n.controls__race-button {\r\n    background-color: rgb(255, 255, 122);\r\n    box-shadow: 0px 5px 0px 0px yellow;\r\n}\r\n\r\n.controls__race {\r\n    display: flex;\r\n    gap: 5px;\r\n    justify-content: space-evenly;\r\n}\r\n\r\n.controls__race * {\r\n    flex-grow: 1;\r\n}\r\n\r\n.garage,\r\n.winners {\r\n    padding-top: 3rem;\r\n}\r\n\r\n.garage__car {\r\n    padding-bottom: 10px;\r\n}\r\n\r\n.car-params {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 30px;\r\n}\r\n\r\n.car-params__controls,\r\n.track__controls {\r\n    display: flex;\r\n    gap: 5px;\r\n}\r\n\r\n.car-params__name {\r\n    font-weight: 700;\r\n    color: rgb(255, 213, 0);\r\n}\r\n\r\n.track {\r\n    position: relative;\r\n    display: flex;\r\n    gap: 30px;\r\n    border-bottom: 3px dashed white;\r\n    padding-top: 1rem;\r\n    margin-bottom: 0.5rem;\r\n}\r\n\r\n.track__car {\r\n    width: 100px;\r\n    fill: currentColor;\r\n    transform: scale(-1, 1);\r\n    align-self: flex-end;\r\n    padding-bottom: 2px;\r\n}\r\n\r\n.track__button {\r\n    background: transparent;\r\n    border: 2px solid rgb(171, 236, 96);\r\n    color: rgb(171, 236, 96);\r\n    padding-top: 0;\r\n    min-width: auto;\r\n}\r\n\r\n.track__button:disabled {\r\n    border: 2px solid gray;\r\n    color: gray;\r\n}\r\n\r\n.track__finish {\r\n    position: absolute;\r\n    right: 15%;\r\n    color: white;\r\n    fill: currentColor;\r\n    width: 50px;\r\n    justify-self: right;\r\n}\r\n\r\n.garage__paginator,\r\n.winners__paginator {\r\n    padding-top: 30px;\r\n    display: flex;\r\n    gap: 5px;\r\n}\r\n\r\n.popup {\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    display: none;\r\n    max-width: 75%;\r\n    text-align: center;\r\n    font-size: 1.5rem;\r\n    font-weight: 900;\r\n    text-shadow: 0 0 20px #fefcc9, 10px -10px 30px #feec85, -20px -20px 40px #ffae34, 20px -40px 50px #ec760c, -20px -60px 60px #cd4606, 0 -80px 70px #973716, 10px -90px 80px #451b0e;\r\n}\r\n\r\n.winners__score {\r\n    width: 690px;\r\n    border-collapse: collapse;\r\n    table-layout: fixed;\r\n}\r\n\r\n.winners__score td,\r\n.winners__score th {\r\n    text-align: left;\r\n    word-wrap: break-word;\r\n    padding: 5px;\r\n    line-height: 150%;\r\n}\r\n\r\n.winners__score .winners__sort-param {\r\n    cursor: pointer;\r\n}\r\n\r\n.winners__score-item .winner__car-img {\r\n    margin-left: 0;\r\n    width: 70px;\r\n    fill: currentColor;\r\n    transform: scale(-1, 1);\r\n    padding-bottom: 2px;\r\n}\r\n\r\n.asc::after {\r\n    content: '⬆';\r\n    padding-left: 5px;\r\n}\r\n\r\n.desc::after {\r\n    content: '⬇';\r\n    padding-left: 5px;\r\n}\r\n\r\n@media (max-width: 1000px) {\r\n\r\n    html {\r\n        font-size: 14px;\r\n    }\r\n\r\n    .header__nav {\r\n        padding: 20px;\r\n    }\r\n\r\n    .main {\r\n        padding: 0 20px;\r\n    }\r\n\r\n    button {\r\n        min-width: 80px;\r\n    }\r\n\r\n    .winners__score {\r\n        width: 630px;\r\n    }\r\n\r\n    .track {\r\n        gap: 20px;\r\n    }\r\n\r\n    .track__car {\r\n        width: 80px;\r\n    }\r\n\r\n    .track__finish {\r\n        width: 40px;\r\n        right: 20%;\r\n    }\r\n\r\n}\r\n\r\n@media (max-width: 700px) {\r\n\r\n    html {\r\n        font-size: 12px;\r\n    }\r\n\r\n    body {\r\n        margin: 0;\r\n    }\r\n\r\n    .header__nav {\r\n        padding-left: 10px;\r\n    }\r\n\r\n    .main {\r\n        padding: 0 10px;\r\n    }\r\n\r\n    button {\r\n        min-width: 70px;\r\n    }\r\n\r\n    .winners__score {\r\n        width: 480px;\r\n    }\r\n\r\n    .track {\r\n        gap: 10px;\r\n    }\r\n\r\n    .track__car {\r\n        width: 80px;\r\n    }\r\n\r\n    .track__finish {\r\n        width: 40px;\r\n    }\r\n\r\n    .winners__score-item .winner__car-img {\r\n        width: 50px;\r\n    }\r\n\r\n}\r\n\r\n\r\n@media (max-width: 499px) {\r\n\r\n    .winners__score {\r\n        width: 95%;\r\n        margin: 0;\r\n    }\r\n\r\n}\r\n\r\n@media (hover: hover) {\r\n\r\n    .header__switch-page:not([disabled]):hover,\r\n    .garage__paginator-button:not([disabled]):hover,\r\n    .winners__paginator-button:not([disabled]):hover {\r\n        background-color: rgb(194, 241, 140);\r\n    }\r\n\r\n    .controls__race-button:not([disabled]):hover {\r\n        background-color: rgb(255, 255, 200);\r\n    }\r\n\r\n    .controls__car-button:not([disabled]):hover,\r\n    .car-params__button:not([disabled]):hover {\r\n        background-color: rgb(147, 206, 238);\r\n    }\r\n\r\n    .track__button:not([disabled]):hover {\r\n        border: 2px solid rgb(147, 206, 238);\r\n        color: rgb(147, 206, 238);\r\n    }\r\n\r\n}",""]);const s=a},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(r)for(var s=0;s<this.length;s++){var i=this[s][0];null!=i&&(a[i]=!0)}for(var o=0;o<e.length;o++){var l=[].concat(e[o]);r&&a[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},427:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(379),a=n.n(r),s=n(767);a()(s.Z,{insert:"head",singleton:!1});const i=s.Z.locals||{}},379:(e,t,n)=>{"use strict";var r,a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),s=[];function i(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].identifier===e){t=n;break}return t}function o(e,t){for(var n={},r=[],a=0;a<e.length;a++){var o=e[a],l=t.base?o[0]+t.base:o[0],c=n[l]||0,m="".concat(l," ").concat(c);n[l]=c+1;var d=i(m),h={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(s[d].references++,s[d].updater(h)):s.push({identifier:m,updater:p(h,t),references:1}),r.push(m)}return r}function l(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var s=n.nc;s&&(r.nonce=s)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var i=a(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var c,m=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,n,r){var a=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=m(t,a);else{var s=document.createTextNode(a),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(s,i[t]):e.appendChild(s)}}function h(e,t,n){var r=n.css,a=n.media,s=n.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var u=null,g=0;function p(e,t){var n,r,a;if(t.singleton){var s=g++;n=u||(u=l(t)),r=d.bind(null,n,s,!1),a=d.bind(null,n,s,!0)}else n=l(t),r=h.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=o(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var a=i(n[r]);s[a].references--}for(var l=o(e,t),c=0;c<n.length;c++){var m=i(n[c]);0===s[m].references&&(s[m].updater(),s.splice(m,1))}n=l}}}},146:e=>{e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 70 330.296 150" xml:space="preserve"><g><g><path d="M37.796,201.027c0.582,0.938,1.245,1.803,1.934,2.651c5.023,6.255,12.637,10.336,21.274,10.336 c8.575,0,16.13-4.019,21.15-10.19c0.696-0.85,1.375-1.699,1.962-2.631c0.536-0.839,0.992-1.729,1.432-2.631 c1.771-3.624,2.848-7.643,2.848-11.951c0-15.125-12.265-27.395-27.397-27.395c-15.128,0-27.393,12.27-27.393,27.395 c0,4.236,1.038,8.192,2.752,11.766C36.794,199.293,37.265,200.179,37.796,201.027z"></path><path d="M242.85,205.657c4.981,5.137,11.925,8.347,19.646,8.347c8.445,0,15.907-3.904,20.936-9.91 c0.787-0.943,1.543-1.891,2.2-2.932c0.585-0.927,1.098-1.895,1.569-2.889c1.683-3.553,2.692-7.478,2.692-11.662 c0-15.13-12.262-27.399-27.397-27.399c-15.131,0.005-27.397,12.274-27.397,27.399c0,5.018,1.45,9.663,3.801,13.712 c0.544,0.922,1.108,1.812,1.745,2.662C241.348,203.912,242.052,204.828,242.85,205.657z"></path><path d="M328.331,127.848l-28.724,8.839c0,0-3.133,2.296-6.7,4.857c-3.019-1.093-6.349-2.333-10.123-3.795 c-32.622-12.637-74.575-21.466-102.03-21.466c-3.443,0-6.659,0.146-9.538,0.425c-15.324,1.479-36.412,9.116-62.686,22.678 c-1.083,0.564-1.797,0.935-2.066,1.051c-7.589,3.25-17.064,4.831-28.975,4.831c-9.028,0-17.89-0.919-25.005-1.654 c-3.936-0.409-7.387-0.764-10.134-0.904c-0.87-0.041-1.644-0.062-2.327-0.062c-5.582,0-7.221,1.417-8.446,4.2 c-0.531,1.209-1.131,2.576-6.475,4.078c-14.183,3.977-24.032,15.089-24.438,15.555l-0.657,0.745v22.66l1.426,0.734 c1.849,0.969,2.524,1.663,2.708,1.834c-2.237,1.982-5.036,4.96-3.866,8.057c1.173,3.086,5.207,3.169,5.665,3.169h27.227 c-0.531-0.854-1.018-1.739-1.468-2.651c-0.43-0.859-0.818-1.739-1.167-2.65c-1.421-3.656-2.227-7.612-2.227-11.766 c0-18.024,14.667-32.697,32.7-32.697c18.028,0,32.7,14.667,32.7,32.697c0,4.246-0.839,8.291-2.317,12.014 c-0.355,0.901-0.759,1.776-1.194,2.636c-0.456,0.906-0.953,1.781-1.483,2.636l143.669,1.605c0,0,1.32,0.036,3.531,0.072 c-0.621-0.859-1.201-1.761-1.729-2.683c-0.502-0.87-0.957-1.766-1.382-2.683c-1.911-4.142-3.004-8.74-3.004-13.598 c0-18.024,14.67-32.697,32.7-32.697s32.699,14.667,32.699,32.697c0,3.651-0.626,7.151-1.734,10.43 c-0.342,1.035-0.74,2.035-1.186,3.014c-0.461,1.02-0.974,2.009-1.538,2.972c5.298-0.983,8.891-2.247,10.708-3.78 c8.84-7.482,18.766-43.273,20.024-47.913l0.119-0.621l-3.558-0.621l-1.568-0.508c0.326-0.88,1.004-1.214,0.698-1.229 c-0.543,0-1.444-0.07-2.895-0.334c4.07-5.15,10.978-8.469,14.064-10.012C332.752,135.802,328.331,127.848,328.331,127.848z"></path></g></g></svg>'},725:e=>{e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve"><metadata> Svg Vector Icons : http://www.onlinewebfonts.com/icon </metadata><g><g transform="translate(0.000000,491.000000) scale(0.100000,-0.100000)"><path d="M3898.3,4798c-965.6-72-1909.2-423.8-2660.9-993.6c-165.9-123.9-197.9-141.9-205.9-111.9c-6,20-38,108-74,195.9c-80,195.9-141.9,245.9-271.9,209.9c-96-26-141.9-84-141.9-181.9c0-100-70,98,2588.9-7312.9c279.9-783.7,523.8-1451.4,541.8-1483.3c94-183.9,367.8-124,367.8,80c0,52-161.9,529.8-487.8,1439.4l-487.8,1361.4l104,94c335.9,303.9,879.6,633.7,1259.5,765.7c285.9,100,481.8,125.9,831.7,114c363.8-14,701.7-68,1077.5-173.9c679.7-191.9,855.7-223.9,1251.5-221.9c435.8,0,785.7,60,1239.5,213.9c277.9,92,527.8,207.9,579.7,267.9c40,44,40,76,46,2808.8c2,1743.3-2,2784.8-14,2816.8c-46,117.9-215.9,153.9-329.9,68c-305.9-229.9-757.7-481.8-1085.5-607.7c-227.9-86-521.8-147.9-755.7-159.9c-389.8-22-681.7,64-1449.4,423.8C5101.8,4746,4594,4848,3898.3,4798z M4530,4382.2c10-18,411.8-1519.4,411.8-1541.4c0-6-120-10-263.9-6c-293.9,8-603.7-18-897.6-76c-203.9-40-633.7-151.9-675.7-177.9c-18-12,62-239.9,315.9-891.6c187.9-479.8,341.9-883.6,341.9-897.6c-2-12-107.9-74-237.9-135.9C3252.6,523.8,2942.7,323.9,2644.8,84c-114-92-217.9-171.9-229.9-175.9c-14-6-157.9,369.9-357.8,925.6l-335.9,935.6l66,56c233.9,197.9,661.7,459.8,1039.6,635.7c129.9,60,235.9,117.9,235.9,129.9c0,12-125.9,343.9-279.9,737.7c-153.9,395.8-273.9,723.7-263.9,731.7c22,20,285.9,112,485.8,167.9c215.9,62,439.8,106,697.7,139.9C3918.3,4396.2,4514,4406.2,4530,4382.2z M6183.3,3796.4c229.9-94,431.8-155.9,615.8-187.9c211.9-38,583.7-38,791.7,0c88,16,169.9,30,181.9,30c12,0,42-265.9,78-733.7c32-405.8,60-739.7,62-743.7c4-4,90,22,191.9,58c207.9,72,573.8,249.9,785.7,379.8c78,46,145.9,88,155.9,94c8,4,14-387.8,14-871.6V939.6l-94-48c-145.9-72-513.8-203.9-723.7-259.9c-102-28-189.9-54-195.9-58c-4-4,20-347.9,54-761.7c34-415.8,56-761.7,50-769.7c-32-52-765.7-76-969.6-30c-48,10-56,36-225.9,781.7c-96,423.8-169.9,775.7-165.9,781.7c6,6,122-6,255.9-24c135.9-18,317.9-32,405.8-32c149.9,0,561.7,46,579.7,64c8,8-111.9,1539.3-121.9,1551.3c-2,4-96-8-207.9-28c-385.8-64-781.7-16-1177.5,139.9c-72,28-130,50-134,46c-2-2,82-379.8,185.9-839.6c106-459.8,185.9-839.6,181.9-845.6c-6-4-175.9,34-377.9,88c-201.9,54-475.8,124-607.7,153.9c-132,28-257.9,60-279.9,70c-34,12-80,161.9-285.9,941.6c-134,509.8-243.9,935.6-243.9,945.6c2,66,515.8-96,1045.5-327.9c199.9-88,363.9-155.9,365.8-153.9c4,4-307.9,1377.4-339.9,1499.4c-4,18-6,34-2,34C6033.4,3858.4,6101.4,3830.4,6183.3,3796.4z M5281.7,937.6c91.9-12,169.9-22,173.9-24c2-2,93.9-345.9,205.9-763.7c110-417.8,205.9-771.7,209.9-787.7c10-22-10-26-104-14c-519.8,60-927.6,50-1239.5-30c-92-24-171.9-38-177.9-32c-30,30-565.8,1483.4-553.8,1495.4c24,24,549.8,155.9,703.7,175.9C4646,977.6,5015.8,967.6,5281.7,937.6z"></path></g></g></svg>'},847:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApiHandler=void 0;class n{static async getCars(){const e=await fetch(`${this.baseUrl}/garage`,{method:"GET",headers:{"Content-Type":"application/json"}});return await e.json()}static async getCarsOnPage(e){const t=await fetch(`${this.baseUrl}/garage?_page=${e}&_limit=7`,{method:"GET",headers:{"Content-Type":"application/json"}});return await t.json()}static async createCar(e,t){const n=await fetch(`${this.baseUrl}/garage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,color:t})});return(await n.json()).id}static async deleteCar(e){if(e<1)throw new Error("Invalid id");const t=await fetch(`${this.baseUrl}/garage/${e}`,{method:"DELETE"});if(200===t.status)return!0;if(404===t.status)throw new Error("Not found");throw new Error(`Server error ${t.status}`)}static async updateCar(e,t,n){if(e<1)throw new Error("Invalid id");const r=await fetch(`${this.baseUrl}/garage/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,color:n})});if(200===r.status)return!0;if(404===r.status)throw new Error("Not found");throw new Error(`Server error ${r.status}`)}static async startEngine(e){return this.handleEngine(e,"started")}static async stopEngine(e){return!!await this.handleEngine(e,"stopped")}static async handleEngine(e,t){if(e<1)throw new Error("Invalid id");const n=await fetch(`${this.baseUrl}/engine?id=${e}&status=${t}`,{method:"PATCH"});if(400===n.status)throw new Error("Bad request");if(404===n.status)throw new Error("Not found");return n.json()}static async go(e){if(e<1)throw new Error("Invalid id");const t=await fetch(`${this.baseUrl}/engine?id=${e}&status=drive`,{method:"PATCH"});if(400===t.status)throw new Error("Bad request");if(404===t.status)throw new Error("Not found");if(500===t.status)throw new Error("Engine died");return e}static async getWinner(e){const t=await fetch(`${this.baseUrl}/winners/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});return await t.json()}static async getWinnersPage(e,t,n,r){const a=`${this.baseUrl}/winners?_page=${e}&_limit=${t}`,s=`&_sort=${n}&_order=${r.toUpperCase()}`,i=await fetch(n&&r?a+s:a,{method:"GET",headers:{"Content-Type":"application/json"}});return{winnersPage:await i.json(),winnersTotalCount:Number(i.headers.get("X-Total-Count"))??0}}static async createWinner(e,t,n){const r=await fetch(`${this.baseUrl}/winners`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,wins:t,time:n})});return await r.json()}static async updateWinner(e,t,n){if(e<1)throw new Error("Invalid id");const r=await fetch(`${this.baseUrl}/winners/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({wins:t,time:n})});if(200===r.status)return await r.json();if(404===r.status)throw new Error("Not found");throw new Error(`Server error ${r.status}`)}static async modifyWinner(e,t){const n=await this.getWinner(e);let r=null;if(n.id){const a=n.wins+1,s=n.time<t?n.time:t;r=await this.updateWinner(e,a,s)}else r=await this.createWinner(e,1,t);return r}static async deleteWinner(e){if(e<1)throw new Error("Invalid id");const t=await fetch(`${this.baseUrl}/winners/${e}`,{method:"DELETE"});if(200===t.status)return!0;if(404===t.status)throw new Error("Not found");throw new Error(`Server error ${t.status}`)}}t.ApiHandler=n,n.baseUrl="http://127.0.0.1:3000"},604:(e,t)=>{"use strict";var n,r,a,s,i;Object.defineProperty(t,"__esModule",{value:!0}),t.TableHeaderNames=t.SortTypes=t.SortValues=t.CarParams=t.CssClasses=void 0,function(e){e.header="header",e.nav="header__nav",e.button="header__switch-page",e.main="main",e.controls="controls",e.carControls="controls__car",e.raceControls="controls__race",e.carCreate="controls__car-create",e.carUpdate="controls__car-update",e.inputName="controls__input-name",e.inputColor="controls__input-color",e.buttonCar="controls__car-button",e.buttonRace="controls__race-button",e.garage="garage",e.garageHeader="garage__header",e.garagePage="garage__page",e.garagePaginator="garage__paginator",e.garagePaginatorBtn="garage__paginator-button",e.carsWrap="garage__cars",e.carParams="car-params",e.carParamsControls="car-params__controls",e.carButton="car-params__button",e.carName="car-params__name",e.track="track",e.trackControls="track__controls",e.trackButton="track__button",e.trackCar="track__car",e.trackFinish="track__finish",e.winners="winners",e.winnersHeader="winners__header",e.winnersPage="winners__page",e.winnersPaginator="winners__paginator",e.winnersPaginatorBtn="winners__paginator-button",e.winnersTable="winners__score",e.winnersTableHead="winners__score-head",e.winnersSort="winners__sort-param",e.winnerTableItem="winners__score-item",e.winnerCar="winner__car-img",e.popUp="popup",e.asc="asc",e.desc="desc"}(n||(t.CssClasses=n={})),function(e){e.placeholderName="Lexus Nexus",e.placeholderColor="#D1D1D1"}(r||(t.CarParams=r={})),function(e){e[e.noSort=0]="noSort",e[e.asc=1]="asc",e[e.desc=2]="desc"}(a||(t.SortValues=a={})),function(e){e.wins="wins",e.time="time"}(s||(t.SortTypes=s={})),function(e){e.number="Number",e.car="Car",e.name="Name",e.wins="Wins",e.bestTime="Best time (sec)"}(i||(t.TableHeaderNames=i={}))},330:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=void 0;const r=n(604);class a{static getSVGElement(e,t){const n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return n.classList.add(t),n}static getRandomName(){const e=[...a.carModel.keys()],t=[...a.carModel.values()],n=Math.floor(Math.random()*e.length),r=Math.floor(Math.random()*t.length);return`${e[n]} ${t[r]}`}static getRandomColor(){const e="0123456789ABCDEF";let t="#";for(let n=0;n<6;n+=1)t+=e[Math.floor(Math.random()*e.length)];return t}}t.Configuration=a,a.elementParams={popupParams:{tag:"div",classNames:[r.CssClasses.popUp]},navParams:{tag:"nav",classNames:[r.CssClasses.nav]},carParams:{tag:"div",classNames:[r.CssClasses.carParams]},carControls:{tag:"div",classNames:[r.CssClasses.carParamsControls]},carButtonSelect:{tag:"button",classNames:[r.CssClasses.carButton],textContent:"Select",type:"button"},headerBtnParams:{tag:"button",classNames:[r.CssClasses.button],type:"button"},carControlsParams:{tag:"div",classNames:[r.CssClasses.carControls]},carCreateParams:{tag:"div",classNames:[r.CssClasses.carCreate]},carUpdateParams:{tag:"div",classNames:[r.CssClasses.carUpdate]},inputNameParams:{tag:"input",classNames:[r.CssClasses.inputName],type:"text"},inputColorParams:{tag:"input",classNames:[r.CssClasses.inputColor],type:"color",value:r.CarParams.placeholderColor},buttonCarCreateParams:{tag:"button",classNames:[r.CssClasses.buttonCar],textContent:"Create",type:"button"},buttonCarUpdateParams:{tag:"button",classNames:[r.CssClasses.buttonCar],textContent:"Update",type:"button"},raceControlsParams:{tag:"div",classNames:[r.CssClasses.raceControls]},buttonRaceRaceParams:{tag:"button",classNames:[r.CssClasses.buttonRace],textContent:"Race",type:"button"},buttonRaceResetParams:{tag:"button",classNames:[r.CssClasses.buttonRace],textContent:"Reset",type:"button"},buttonRaceGenerateParams:{tag:"button",classNames:[r.CssClasses.buttonRace],textContent:"Generate cars",type:"button"},garageHeaderParams:{tag:"h1",classNames:[r.CssClasses.garageHeader]},garagePageParams:{tag:"h3",classNames:[r.CssClasses.garagePage]},carsWrapParams:{tag:"div",classNames:[r.CssClasses.carsWrap]},garagePaginatorParams:{tag:"div",classNames:[r.CssClasses.garagePaginator]},garagePaginatorPrevParams:{tag:"button",classNames:[r.CssClasses.garagePaginatorBtn],textContent:"PREV",type:"button"},garagePaginatorNextParams:{tag:"button",classNames:[r.CssClasses.garagePaginatorBtn],textContent:"NEXT",type:"button"},carParamsParams:{tag:"div",classNames:[r.CssClasses.carParams]},carTrackControlsParams:{tag:"div",classNames:[r.CssClasses.carParamsControls]},carButtonSelectParams:{tag:"button",classNames:[r.CssClasses.carButton],textContent:"Select",type:"button"},carButtonRemoveParams:{tag:"button",classNames:[r.CssClasses.carButton],textContent:"Remove",type:"button"},carNameParams:{tag:"div",classNames:[r.CssClasses.carName]},trackParams:{tag:"div",classNames:[r.CssClasses.track]},trackControlsParams:{tag:"div",classNames:[r.CssClasses.trackControls]},trackButtonAParams:{tag:"button",classNames:[r.CssClasses.trackButton],textContent:"A",type:"button"},trackButtonBParams:{tag:"button",classNames:[r.CssClasses.trackButton],textContent:"B",type:"button"},winnersHeaderParams:{tag:"h1",classNames:[r.CssClasses.winnersHeader]},winnersPageParams:{tag:"h3",classNames:[r.CssClasses.winnersPage]},winnersPaginatorParams:{tag:"div",classNames:[r.CssClasses.winnersPaginator]},winnersPaginatorPrevParams:{tag:"button",classNames:[r.CssClasses.winnersPaginatorBtn],textContent:"PREV",type:"button"},winnersPaginatorNextParams:{tag:"button",classNames:[r.CssClasses.winnersPaginatorBtn],textContent:"NEXT",type:"button"},winnerTableParams:{tag:"table",classNames:[r.CssClasses.winnersTable]},winnersTableHeadParams:{tag:"thead",classNames:[r.CssClasses.winnersTableHead]},winnersTableHeadItemParams:{tag:"th",classNames:[r.CssClasses.winnersTableHead]},winnersTableBodyParams:{tag:"tbody",classNames:[]},winnerTableCellParams:{tag:"td",classNames:[r.CssClasses.winnerTableItem]}},a.viewParams={headerParams:{tag:"header",classNames:[r.CssClasses.header]},mainParams:{tag:"main",classNames:[r.CssClasses.main]},controlsSectionParams:{tag:"section",classNames:[r.CssClasses.controls]},garageSectionParams:{tag:"section",classNames:[r.CssClasses.garage]},trackView:{tag:"div",classNames:[]},garageView:{tag:"div",classNames:[]},winnersSection:{tag:"section",classNames:[r.CssClasses.winners]},winnerView:{tag:"tr",classNames:[]}},a.itemsPerPage={garage:7,winners:10},a.carModel=new Map([["Lexus","RX"],["BMW","X6"],["Cadillac","Escalade"],["Toyota","Corolla"],["Mercedez","McLaren"],["Porshe","Carrera"],["Jaguar","F-Type SVR"],["Genezis","G80"],["Chevrolet","Impala"],["Lamborghini","Veneno"],["Ferrari","Dino"]])},902:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementCreator=void 0;class n{constructor(e){this.element=this.createElement(e),this.setCssClasses(e.classNames),this.setTextContent(e.textContent),this.setType(e.type),this.setValue(e.value)}createElement(e){return document.createElement(e.tag)}getElement(){return this.element}addInnerElement(e){e instanceof n?this.element.append(e.getElement()):this.element.append(e)}setCssClasses(e=[]){e.map((e=>this.element.classList.add(e)))}removeCssClass(e=[]){e.map((e=>this.element.classList.remove(e)))}setTextContent(e=""){this.element.textContent=e}setType(e=""){"type"in this.element&&this.element.setAttribute("type",e)}setValue(e=""){"value"in this.element&&(this.element.value=e)}setCallback(e){"function"==typeof e&&this.element.addEventListener("click",(t=>e(t)))}setDisableElement(e){(this.element instanceof HTMLButtonElement||this.element instanceof HTMLInputElement)&&(this.element.disabled=e)}}t.ElementCreator=n},503:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Popup=void 0;const r=n(902),a=n(330);t.Popup=class{static init(){return this.popup=new r.ElementCreator(a.Configuration.elementParams.popupParams),this.popup}static displayMessage(e){this.popup.setTextContent(e),this.popup.element.style.display="block",setTimeout((()=>{this.popup.element.style.display="none"}),5e3)}}},677:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderView=void 0;const r=n(902),a=n(487),s=n(330);class i extends a.View{constructor(e){super(s.Configuration.viewParams.headerParams),this.pages=e,this.headerButtons=[],this.configureView()}configureView(){const e=new r.ElementCreator(s.Configuration.elementParams.navParams);this.viewElementCreator.addInnerElement(e),this.pages.forEach((t=>{const n=new r.ElementCreator(s.Configuration.elementParams.headerBtnParams);n.setTextContent(t.name.toUpperCase()),n.setCallback(t.onPress),e.addInnerElement(n),this.headerButtons.push(n)})),this.viewElementCreator.addInnerElement(e)}}t.HeaderView=i},768:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ControlsSectionView=void 0;const r=n(902),a=n(487),s=n(604),i=n(330);class o extends a.View{constructor(){super(i.Configuration.viewParams.controlsSectionParams),this.carCreateBtn=null,this.carCreateNameInput=null,this.carCreateColorInput=null,this.carUpdateBtn=null,this.carUpdateNameInput=null,this.carUpdateColorInput=null,this.carRaceBtn=null,this.carResetBtn=null,this.carGenerateBtn=null,this.configureView()}configureView(){const e=new r.ElementCreator(i.Configuration.elementParams.carControlsParams),t=new r.ElementCreator(i.Configuration.elementParams.carCreateParams),n=new r.ElementCreator(i.Configuration.elementParams.carUpdateParams),a=new r.ElementCreator(i.Configuration.elementParams.raceControlsParams);this.carCreateNameInput=new r.ElementCreator(i.Configuration.elementParams.inputNameParams),this.carCreateNameInput.getElement().setAttribute("placeholder",s.CarParams.placeholderName),this.carUpdateNameInput=new r.ElementCreator(i.Configuration.elementParams.inputNameParams),this.carCreateColorInput=new r.ElementCreator(i.Configuration.elementParams.inputColorParams),this.carUpdateColorInput=new r.ElementCreator(i.Configuration.elementParams.inputColorParams),this.carCreateBtn=new r.ElementCreator(i.Configuration.elementParams.buttonCarCreateParams),this.carUpdateBtn=new r.ElementCreator(i.Configuration.elementParams.buttonCarUpdateParams),this.carRaceBtn=new r.ElementCreator(i.Configuration.elementParams.buttonRaceRaceParams),this.carResetBtn=new r.ElementCreator(i.Configuration.elementParams.buttonRaceResetParams),this.carGenerateBtn=new r.ElementCreator(i.Configuration.elementParams.buttonRaceGenerateParams),t.addInnerElement(this.carCreateNameInput),t.addInnerElement(this.carCreateColorInput),t.addInnerElement(this.carCreateBtn),n.addInnerElement(this.carUpdateNameInput),n.addInnerElement(this.carUpdateColorInput),n.addInnerElement(this.carUpdateBtn),e.addInnerElement(t),e.addInnerElement(n),a.addInnerElement(this.carRaceBtn),a.addInnerElement(this.carResetBtn),a.addInnerElement(this.carGenerateBtn),this.viewElementCreator.addInnerElement(e),this.viewElementCreator.addInnerElement(a),this.toggleUpdateElements(!0)}setCarName(e){if(this.carUpdateNameInput){const t=this.carUpdateNameInput.getElement();t instanceof HTMLInputElement&&(t.value=e)}}setCarColor(e){if(this.carUpdateColorInput){const t=this.carUpdateColorInput.getElement();t instanceof HTMLInputElement&&(t.value=e)}}toggleUpdateElements(e){this.carUpdateBtn?.setDisableElement(e),this.carUpdateColorInput?.setDisableElement(e),this.carUpdateNameInput?.setDisableElement(e)}}t.ControlsSectionView=o},74:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GarageSectionView=void 0;const r=n(902),a=n(487),s=n(927),i=n(330);class o extends a.View{constructor(){super(i.Configuration.viewParams.garageSectionParams),this.paginatorButtons={},this.carsWrap=null,this.garageHeader=null,this.pageHeader=null,this.currentPage=1,this.itemsPerPage=i.Configuration.itemsPerPage.garage,this.configureView()}configureView(){this.garageHeader=new r.ElementCreator(i.Configuration.elementParams.garageHeaderParams),this.pageHeader=new r.ElementCreator(i.Configuration.elementParams.garagePageParams),this.carsWrap=new r.ElementCreator(i.Configuration.elementParams.carsWrapParams);const e=new r.ElementCreator(i.Configuration.elementParams.garagePaginatorParams),t=new r.ElementCreator(i.Configuration.elementParams.garagePaginatorPrevParams);t.setCallback((()=>{this.currentPage-=1,this.updatePaginator()}));const n=new r.ElementCreator(i.Configuration.elementParams.garagePaginatorNextParams);n.setCallback((()=>{this.currentPage+=1,this.updatePaginator()})),this.paginatorButtons.prev=t,this.paginatorButtons.next=n,e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(this.garageHeader),this.viewElementCreator.addInnerElement(this.pageHeader),this.viewElementCreator.addInnerElement(this.carsWrap),this.viewElementCreator.addInnerElement(e)}updatePaginator(){this.carsWrap&&(this.carsWrap.getElement().innerHTML="");const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;s.TrackView.instances.slice(e,t).forEach((e=>{this.carsWrap&&this.carsWrap.addInnerElement(e.getHtmlElement())})),this.pageHeader?.setTextContent(`Page #${this.currentPage}`),this.setBtnStyles()}setBtnStyles(){const e=s.TrackView.instances.length,t=Math.ceil(e/this.itemsPerPage);this.currentPage+1>t?this.paginatorButtons.next.setDisableElement(!0):this.paginatorButtons.next.setDisableElement(!1),1===this.currentPage?this.paginatorButtons.prev.setDisableElement(!0):this.paginatorButtons.prev.setDisableElement(!1)}}t.GarageSectionView=o},927:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TrackView=void 0;const a=n(487),s=n(902),i=r(n(146)),o=r(n(725)),l=n(847),c=n(503),m=n(604),d=n(330);class h extends a.View{constructor(e,t,n){super(d.Configuration.viewParams.trackView),this.id=0,this.run=!1,this.runTime=null,this.carImg=null,this.finishImg=null,this.nameEl=null,this.trackButtonA=null,this.trackButtonB=null,this.removeBtn=null,this.selectBtn=null,this.onSelectCallback=null,n?this.id=n:l.ApiHandler.createCar(e,t).then((e=>{this.id=e})),this.name=e,this.color=t,this.configureView(),h.instances.push(this)}configureView(){const e=new s.ElementCreator(d.Configuration.elementParams.carParamsParams),t=new s.ElementCreator(d.Configuration.elementParams.carTrackControlsParams),n=new s.ElementCreator(d.Configuration.elementParams.trackParams),r=new s.ElementCreator(d.Configuration.elementParams.trackControlsParams);this.selectBtn=new s.ElementCreator(d.Configuration.elementParams.carButtonSelectParams),this.removeBtn=new s.ElementCreator(d.Configuration.elementParams.carButtonRemoveParams),this.nameEl=new s.ElementCreator(d.Configuration.elementParams.carNameParams),this.nameEl.setTextContent(this.name),this.trackButtonA=new s.ElementCreator(d.Configuration.elementParams.trackButtonAParams),this.trackButtonB=new s.ElementCreator(d.Configuration.elementParams.trackButtonBParams),this.trackButtonB.setDisableElement(!0),this.setCallbacks(),this.carImg=d.Configuration.getSVGElement(i.default,m.CssClasses.trackCar),this.carImg.style.color=this.color,this.finishImg=d.Configuration.getSVGElement(o.default,m.CssClasses.trackFinish),this.viewElementCreator.addInnerElement(e),t.addInnerElement(this.selectBtn),t.addInnerElement(this.removeBtn),e.addInnerElement(t),e.addInnerElement(this.nameEl),r.addInnerElement(this.trackButtonA),r.addInnerElement(this.trackButtonB),n.addInnerElement(r),n.addInnerElement(this.carImg),n.addInnerElement(this.finishImg),this.viewElementCreator.addInnerElement(n)}static getInstances(){return h.instances}setOnSelectCallback(e){this.onSelectCallback=e}updateCar(e,t){l.ApiHandler.updateCar(this.id,e,t).then((n=>{n&&(this.setName(e),this.setColor(t))}))}setName(e){this.name=e,this.nameEl?.setTextContent(this.name)}setColor(e){if(this.color=e,!this.carImg)throw new Error("Car image not found");this.carImg.style.color=this.color}removeCar(){l.ApiHandler.deleteCar(this.id).then((e=>{if(!e)return;const t=h.instances.indexOf(this);-1!==t&&h.instances.splice(t,1),this.viewElementCreator.getElement().remove(),l.ApiHandler.deleteWinner(this.id).catch((()=>{})),h.onRemove&&h.onRemove()}))}async go(){let e;this.trackButtonA?.setDisableElement(!0);try{e=await l.ApiHandler.startEngine(this.id)}catch(e){throw this.trackButtonA?.setDisableElement(!1),new Error}this.runTime=e.distance/e.velocity,this.run=!0,this.animateCar(this.runTime);try{this.trackButtonA?.setDisableElement(!0),this.trackButtonB?.setDisableElement(!1),await l.ApiHandler.go(this.id)}catch(e){throw this.run=!1,new Error}try{if(!this.run)throw new Error}catch{throw new Error}return this.id}async resetPosition(){if(this.trackButtonB?.setDisableElement(!0),!this.run||await l.ApiHandler.stopEngine(this.id)){if(this.run=!1,!this.carImg)throw new Error("Images were not found");this.carImg.style.transform="scale(-1, 1)",this.trackButtonB?.setDisableElement(!0),this.trackButtonA?.setDisableElement(!1)}}static race(e){return new Promise(((t,n)=>{const r=[],a=(e-1)*d.Configuration.itemsPerPage.garage;h.instances.slice(a,a+d.Configuration.itemsPerPage.garage).forEach((e=>{r.push(e.go())})),Promise.any(r).then((e=>{const r=h.instances.find((t=>t.id===e));r&&r.runTime?(c.Popup.displayMessage(`${r.name} went first (${Math.round(r.runTime/10)/100}s)`),l.ApiHandler.modifyWinner(r.id,Math.round(r.runTime/10)/100).then((()=>t())).catch((()=>n()))):(c.Popup.displayMessage("All cars were are either broken or stopped. Try again!"),n())})).catch((()=>{c.Popup.displayMessage("All cars were are either broken or stopped. Try again!"),n()}))}))}static async resetAll(){const e=[];return h.instances.forEach((t=>{e.push(t.resetPosition())})),Promise.all(e)}animateCar(e){let t=null;if(!this.carImg||!this.finishImg)throw new Error("Images were not found");const n=this.finishImg.getBoundingClientRect().right-this.carImg.getBoundingClientRect().left,r=n/e,a=s=>{if(!this.run)return;t||(t=s);const i=s-t;if(!this.carImg)throw new Error("Images were not found");this.carImg.style.transform=`translateX(${Math.min(r*i,n)}px) scale(-1, 1)`,i<e&&window.requestAnimationFrame(a)};window.requestAnimationFrame(a)}setCallbacks(){this.selectBtn?.setCallback((()=>{this.onSelectCallback&&this.onSelectCallback(this.name,this.color)})),this.removeBtn?.setCallback(this.removeCar.bind(this)),this.trackButtonA?.setCallback((async()=>{try{this.trackButtonA?.setDisableElement(!0),await this.go()}catch{}})),this.trackButtonB?.setCallback((async()=>{try{await this.resetPosition()}finally{this.trackButtonA?.setDisableElement(!1)}}))}}t.TrackView=h,h.instances=[],h.onRemove=null},324:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GarageView=void 0;const r=n(74),a=n(768),s=n(927),i=n(487),o=n(847),l=n(503),c=n(604),m=n(330);class d extends i.View{constructor(){super(m.Configuration.viewParams.garageView),this.selectedCar=null,this.controlsSection=new a.ControlsSectionView,this.garageSection=new r.GarageSectionView,this.cars=s.TrackView.instances,this.initCarView(),this.configureView(),s.TrackView.onRemove=this.updateCarsView.bind(this)}configureView(){this.setCallbacks(),this.updateCarsView(),this.viewElementCreator.addInnerElement(this.controlsSection.getHtmlElement()),this.viewElementCreator.addInnerElement(this.garageSection.getHtmlElement()),this.viewElementCreator.addInnerElement(l.Popup.init())}setCallbacks(){this.controlsSection.carCreateBtn?.setCallback((()=>{const{name:e,color:t}=this.getNameColor();this.createCar({name:e,color:t})})),this.controlsSection.carUpdateBtn?.setCallback((()=>{this.updateSelectedCar()})),this.controlsSection.carRaceBtn?.setCallback((async()=>{this.controlsSection.carRaceBtn?.setDisableElement(!0),this.handleOnRaceBtnStyles(!0),await s.TrackView.resetAll();try{await s.TrackView.race(this.garageSection.currentPage)}catch{}finally{this.handleOnRaceBtnStyles(!1)}})),this.controlsSection.carResetBtn?.setCallback((async()=>{await s.TrackView.resetAll(),this.controlsSection.carRaceBtn?.setDisableElement(!1)})),this.controlsSection.carGenerateBtn?.setCallback(this.GenerateCars.bind(this)),this.cars.forEach((e=>{e.setOnSelectCallback(((t,n)=>{this.selectedCar=e,this.fillUpdateCarInputs(t,n)}))}))}updateCarsView(){this.garageSection.garageHeader?.setTextContent(`Garage (${this.cars.length})`),this.garageSection.updatePaginator()}createCar({name:e,color:t,id:n}=this.getNameColor()){const r=new s.TrackView(e,t,n);r.setOnSelectCallback(((e,t)=>{this.selectedCar=r,this.fillUpdateCarInputs(e,t)})),this.garageSection.carsWrap?.addInnerElement(r.getHtmlElement()),this.updateCarsView()}getNameColor(e=this.controlsSection.carCreateNameInput,t=this.controlsSection.carCreateColorInput){const n=e?.getElement(),r=t?.getElement();if(!(n instanceof HTMLInputElement&&r instanceof HTMLInputElement))throw new Error("There is no instance of HTMLInputElement");let a=n.value;return""===a&&(a=c.CarParams.placeholderName),{name:a,color:r.value}}GenerateCars(){for(let e=0;e<100;e+=1)this.createCar({name:m.Configuration.getRandomName(),color:m.Configuration.getRandomColor()})}fillUpdateCarInputs(e,t){this.controlsSection.toggleUpdateElements(!1),this.controlsSection&&(this.controlsSection.setCarName(e),this.controlsSection.setCarColor(t))}updateSelectedCar(){if(this.selectedCar&&this.controlsSection){const{name:e,color:t}=this.getNameColor(this.controlsSection.carUpdateNameInput,this.controlsSection.carUpdateColorInput);this.selectedCar.updateCar(e,t),this.selectedCar=null,this.fillUpdateCarInputs("",c.CarParams.placeholderColor),this.controlsSection.toggleUpdateElements(!0)}}handleOnRaceBtnStyles(e){this.controlsSection.carResetBtn?.setDisableElement(e),this.controlsSection.carCreateBtn?.setDisableElement(e),this.controlsSection.carUpdateBtn?.setDisableElement(e),this.controlsSection.carGenerateBtn?.setDisableElement(e),this.cars.forEach((t=>{t.removeBtn?.setDisableElement(e),t.selectBtn?.setDisableElement(e)}))}async initCarView(){(await o.ApiHandler.getCars()).forEach((e=>{s.TrackView.instances.some((t=>t.id===e.id))||this.createCar({name:e.name,color:e.color,id:e.id})}))}}t.GarageView=d},665:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MainView=void 0;const r=n(487),a=n(330);class s extends r.View{constructor(){super(a.Configuration.viewParams.mainParams)}setContent(e){this.viewElementCreator.getElement().innerHTML="",this.viewElementCreator.addInnerElement(e.getHtmlElement())}}t.MainView=s},686:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WinnerView=void 0;const a=n(487),s=n(902),i=n(604),o=n(330),l=r(n(146));class c extends a.View{constructor(e,t){super(o.Configuration.viewParams.winnerView),this.carImg=null,this.id=e.id,this.name=e.name,this.bestTime=e.bestTime,this.winsCount=e.winsCount,this.color=e.color,this.id=e.id,this.configureView(t)}configureView(e){const t={};Object.keys(i.TableHeaderNames).forEach((e=>{t[e]=new s.ElementCreator(o.Configuration.elementParams.winnerTableCellParams)})),t.number.setTextContent((e+1).toString()),this.carImg=o.Configuration.getSVGElement(l.default,i.CssClasses.winnerCar),this.carImg.style.color=this.color,t.car.addInnerElement(this.carImg),t.name.setTextContent(this.name),t.wins.setTextContent(this.winsCount.toString()),t.bestTime.setTextContent(this.bestTime.toString()),Object.values(t).forEach((e=>{this.viewElementCreator.addInnerElement(e)}))}}t.WinnerView=c},377:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WinnersView=void 0;const r=n(902),a=n(487),s=n(927),i=n(686),o=n(847),l=n(604),c=n(330);class m extends a.View{constructor(){super(c.Configuration.viewParams.winnersSection),this.paginatorButtons={},this.winnersTable=null,this.winnersTableBody=null,this.winnersHeader=null,this.pageHeader=null,this.winnersSort=[],this.winners=null,this.currentPage=1,this.itemsPerPage=c.Configuration.itemsPerPage.winners,this.winnersCount=0,this.winSort=0,this.timeSort=0,this.sortType="",this.configureView(),this.drawWinners()}configureView(){this.winnersHeader=new r.ElementCreator(c.Configuration.elementParams.winnersHeaderParams),this.pageHeader=new r.ElementCreator(c.Configuration.elementParams.winnersPageParams),this.winnersTable=new r.ElementCreator(c.Configuration.elementParams.winnerTableParams),this.winnersTableBody=new r.ElementCreator(c.Configuration.elementParams.winnersTableBodyParams);const e=new r.ElementCreator(c.Configuration.elementParams.winnersTableHeadParams);this.fillTableHeader(e);const t=new r.ElementCreator(c.Configuration.elementParams.winnersPaginatorParams),n=new r.ElementCreator(c.Configuration.elementParams.winnersPaginatorPrevParams);n.setCallback((()=>{this.currentPage-=1,this.handlePaginator()})),this.paginatorButtons.prev=n;const a=new r.ElementCreator(c.Configuration.elementParams.winnersPaginatorNextParams);a.setCallback((()=>{this.currentPage+=1,this.handlePaginator()})),this.paginatorButtons.next=a,t.addInnerElement(n),t.addInnerElement(a),this.winnersTable.addInnerElement(e),this.winnersTable.addInnerElement(this.winnersTableBody),this.viewElementCreator.addInnerElement(this.winnersHeader),this.viewElementCreator.addInnerElement(this.pageHeader),this.viewElementCreator.addInnerElement(this.winnersTable),this.viewElementCreator.addInnerElement(t)}fillTableHeader(e){Object.values(l.TableHeaderNames).forEach((t=>{const n=new r.ElementCreator(c.Configuration.elementParams.winnersTableHeadItemParams);switch(n.setTextContent(t),t){case l.TableHeaderNames.wins:n.setCssClasses([l.CssClasses.winnersSort]),this.winnersSort.push(n),n.setCallback((()=>{this.sortType=l.SortTypes.wins,this.timeSort=0,this.winSort=this.setSort(this.winSort,n),this.drawWinners()}));break;case l.TableHeaderNames.bestTime:n.setCssClasses([l.CssClasses.winnersSort]),this.winnersSort.push(n),n.setCallback((()=>{this.sortType=l.SortTypes.time,this.winSort=0,this.timeSort=this.setSort(this.timeSort,n),this.drawWinners()}))}e.addInnerElement(n)}))}handlePaginator(){this.drawWinners(),this.pageHeader?.setTextContent(`Page #${this.currentPage}`),this.setBtnStyles()}setBtnStyles(){const e=Math.ceil(this.winnersCount/this.itemsPerPage);this.currentPage+1>e?this.paginatorButtons.next.setDisableElement(!0):this.paginatorButtons.next.setDisableElement(!1),1===this.currentPage?this.paginatorButtons.prev.setDisableElement(!0):this.paginatorButtons.prev.setDisableElement(!1)}async drawWinners(){const e=await o.ApiHandler.getWinnersPage(this.currentPage,this.itemsPerPage,this.sortType,l.SortValues[this.winSort||this.timeSort]);this.winnersTableBody&&(this.winnersTableBody.getElement().innerHTML="",e.winnersPage.forEach(((e,t)=>{const n=s.TrackView.instances.find((t=>t.id===e.id));if(!n)return;const r={id:e.id,name:n.name,bestTime:e.time,winsCount:e.wins,color:n.color},a=new i.WinnerView(r,t);this.winnersTableBody?.addInnerElement(a.getHtmlElement())})),this.winnersCount=e.winnersTotalCount,this.winnersHeader?.setTextContent(`Winners (${this.winnersCount})`),this.setBtnStyles())}setSort(e,t){const n=e===l.SortValues.desc?l.SortValues.noSort:e+1;switch(this.winnersSort.forEach((e=>{e.removeCssClass([l.CssClasses.asc,l.CssClasses.desc])})),n){case l.SortValues.asc:t.setCssClasses([l.CssClasses.asc]);break;case l.SortValues.desc:t.setCssClasses([l.CssClasses.desc]);break;default:this.sortType=""}return n}}t.WinnersView=m},487:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;const r=n(902);t.View=class{constructor(e){this.viewElementCreator=this.createView(e)}getHtmlElement(){return this.viewElementCreator.getElement()}createView(e){const t={tag:e.tag,classNames:e.classNames,textContent:"",callback:null};return this.viewElementCreator=new r.ElementCreator(t),this.viewElementCreator}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={id:r,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";const e=n(677),t=n(665);n(427);const r=n(324),a=n(377);(new class{constructor(){this.main=new t.MainView,this.garageView=new r.GarageView,this.winnersView=new a.WinnersView,this.header=new e.HeaderView([{name:"Garage",onPress:()=>{this.main.setContent(this.garageView)}},{name:"Winners",onPress:()=>{this.main.setContent(this.winnersView),this.winnersView.drawWinners()}}])}createView(){this.main.setContent(this.garageView),document.body.append(this.header.getHtmlElement(),this.main.getHtmlElement())}}).createView()})()})();